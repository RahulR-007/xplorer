<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Sign In - X-plorer</title>
  <link rel="stylesheet" href="/assets/css/authenticate.css">
</head>
<body>

<header>
  <nav>
    <div class="logo">X-plorer</div>
    <ul class="nav-links">
      <li><a href="../index.html">Home</a></li>
      <li><a href="#">About</a></li>
      <li><a href="visit.html">Visit</a></li>
      <li><a href="contact.html">Contact</a></li>
    </ul>
    <div class="menu-toggle">&#9776;</div>
  </nav>
</header>

<div class="container">
  <form id="signin-form">
    <p>Welcome Back</p>
    <input type="email" id="signin-email" placeholder="Email" required /><br />
    <input type="password" id="signin-password" placeholder="Password" required /><br />
    <button type="submit">Sign In</button><br />
    <a href="signup.html">New? Create New Account</a>
  </form>
  <p id="signin-message" style="color: red; margin-top: 10px;"></p>
</div>

<!-- Firebase SDK -->
<script type="module">
  // Import Firebase SDKs
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.5.0/firebase-app.js";
  import { getAuth, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/11.5.0/firebase-auth.js";

  // Firebase config
  const firebaseConfig = {
    apiKey: "AIzaSyD-Ooa0zu_3ksyyMFdGza5gCWaQCnir7RA",
    authDomain: "xplorer-007.firebaseapp.com",
    projectId: "xplorer-007",
    storageBucket: "xplorer-007.appspot.com",
    messagingSenderId: "655828064067",
    appId: "1:655828064067:web:3ceca43066242033a881f6"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);

  // Sign In logic
  const signinForm = document.getElementById('signin-form');
  const messageBox = document.getElementById('signin-message');

  signinForm.addEventListener('submit', async (e) => {
    e.preventDefault();

    const email = document.getElementById('signin-email').value;
    const password = document.getElementById('signin-password').value;

    try {
      await signInWithEmailAndPassword(auth, email, password);
      messageBox.style.color = "green";
      messageBox.textContent = "Login successful!";
      window.location.href = "agent/index.html";

    } catch (error) { 
      messageBox.style.color = "red";
      messageBox.textContent = error.message;
    }
  });
</script>

</body>
</html>